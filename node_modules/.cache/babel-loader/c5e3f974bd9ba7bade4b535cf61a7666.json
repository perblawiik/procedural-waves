{"ast":null,"code":"import Vector3 from \"./math/Vector3\";\nimport RigidBody from \"./RigidBody\";\nimport SphereCollider from \"./SphereCollider\";\n\nclass Bullets {\n  constructor(bulletModel, bulletSpeed, bulletReach) {\n    this.activeBullets = [];\n    this.model = bulletModel;\n    let collider = new SphereCollider();\n    collider.transform.setScale([2.0, 2.0, 2.0]);\n    this.model.setCollider();\n    this.speed = bulletSpeed;\n    this.reach = bulletReach;\n    this.gravityIsEnabled = false;\n    this.gravity = 9.82;\n  }\n\n  addBullet(origin, direction) {\n    let rb = new RigidBody(origin);\n    rb.setVelocity([direction.x * this.speed, direction.y * this.speed, direction.z * this.speed]);\n    rb.enableGravity(this.gravityIsEnabled);\n    this.activeBullets.push({\n      body: rb,\n      origin: new Vector3(origin)\n    });\n  }\n\n  enableGravity(state) {\n    this.gravityIsEnabled = state;\n    this.activeBullets.forEach(bullet => {\n      bullet.body.enableGravity(state);\n    });\n  }\n\n  update(timeStep) {\n    let i = 0;\n\n    while (i < this.activeBullets.length) {\n      this.model.setRigidBody(this.activeBullets[i].body);\n      this.model.update(timeStep); // Check distance from start position\n\n      if (Vector3.distance(this.activeBullets[i].body.position, this.activeBullets[i].origin) < this.reach) {\n        ++i;\n      } else {\n        // Remove bullet if distance is greater than reach\n        this.activeBullets.splice(i, 1);\n      }\n    }\n  }\n\n  render(shader) {\n    this.activeBullets.forEach(bullet => {\n      // Set bullet position\n      this.model.setPosition([bullet.body.position.x, bullet.body.position.y, bullet.body.position.z]); // Draw bullet\n\n      this.model.render(shader);\n    });\n  }\n\n}\n\nexport default Bullets;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\Bullets.js"],"names":["Vector3","RigidBody","SphereCollider","Bullets","constructor","bulletModel","bulletSpeed","bulletReach","activeBullets","model","collider","transform","setScale","setCollider","speed","reach","gravityIsEnabled","gravity","addBullet","origin","direction","rb","setVelocity","x","y","z","enableGravity","push","body","state","forEach","bullet","update","timeStep","i","length","setRigidBody","distance","position","splice","render","shader","setPosition"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,gBAApB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,cAAP,MAA2B,kBAA3B;;AAEA,MAAMC,OAAN,CAAc;AACVC,EAAAA,WAAW,CAAEC,WAAF,EAAeC,WAAf,EAA4BC,WAA5B,EAAyC;AAChD,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,KAAL,GAAaJ,WAAb;AACA,QAAIK,QAAQ,GAAG,IAAIR,cAAJ,EAAf;AACAQ,IAAAA,QAAQ,CAACC,SAAT,CAAmBC,QAAnB,CAA4B,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAA5B;AACA,SAAKH,KAAL,CAAWI,WAAX;AACA,SAAKC,KAAL,GAAaR,WAAb;AACA,SAAKS,KAAL,GAAaR,WAAb;AAEA,SAAKS,gBAAL,GAAwB,KAAxB;AACA,SAAKC,OAAL,GAAe,IAAf;AACH;;AAEDC,EAAAA,SAAS,CAACC,MAAD,EAASC,SAAT,EAAoB;AACzB,QAAIC,EAAE,GAAG,IAAIpB,SAAJ,CAAckB,MAAd,CAAT;AACAE,IAAAA,EAAE,CAACC,WAAH,CAAe,CAACF,SAAS,CAACG,CAAV,GAAc,KAAKT,KAApB,EAA2BM,SAAS,CAACI,CAAV,GAAc,KAAKV,KAA9C,EAAqDM,SAAS,CAACK,CAAV,GAAc,KAAKX,KAAxE,CAAf;AACAO,IAAAA,EAAE,CAACK,aAAH,CAAiB,KAAKV,gBAAtB;AAEA,SAAKR,aAAL,CAAmBmB,IAAnB,CAAwB;AACpBC,MAAAA,IAAI,EAAEP,EADc;AAEpBF,MAAAA,MAAM,EAAE,IAAInB,OAAJ,CAAYmB,MAAZ;AAFY,KAAxB;AAIH;;AAEDO,EAAAA,aAAa,CAACG,KAAD,EAAQ;AACjB,SAAKb,gBAAL,GAAwBa,KAAxB;AAEA,SAAKrB,aAAL,CAAmBsB,OAAnB,CAA4BC,MAAD,IAAY;AACnCA,MAAAA,MAAM,CAACH,IAAP,CAAYF,aAAZ,CAA0BG,KAA1B;AACH,KAFD;AAGH;;AAEDG,EAAAA,MAAM,CAACC,QAAD,EAAW;AACb,QAAIC,CAAC,GAAG,CAAR;;AACA,WAAMA,CAAC,GAAG,KAAK1B,aAAL,CAAmB2B,MAA7B,EAAqC;AACjC,WAAK1B,KAAL,CAAW2B,YAAX,CAAwB,KAAK5B,aAAL,CAAmB0B,CAAnB,EAAsBN,IAA9C;AACA,WAAKnB,KAAL,CAAWuB,MAAX,CAAkBC,QAAlB,EAFiC,CAIjC;;AACA,UAAIjC,OAAO,CAACqC,QAAR,CAAiB,KAAK7B,aAAL,CAAmB0B,CAAnB,EAAsBN,IAAtB,CAA2BU,QAA5C,EAAsD,KAAK9B,aAAL,CAAmB0B,CAAnB,EAAsBf,MAA5E,IAAsF,KAAKJ,KAA/F,EAAsG;AAClG,UAAEmB,CAAF;AACH,OAFD,MAGK;AAAC;AACF,aAAK1B,aAAL,CAAmB+B,MAAnB,CAA0BL,CAA1B,EAA6B,CAA7B;AACH;AACJ;AACJ;;AAEDM,EAAAA,MAAM,CAACC,MAAD,EAAS;AACX,SAAKjC,aAAL,CAAmBsB,OAAnB,CAA4BC,MAAD,IAAY;AACnC;AACA,WAAKtB,KAAL,CAAWiC,WAAX,CAAuB,CAACX,MAAM,CAACH,IAAP,CAAYU,QAAZ,CAAqBf,CAAtB,EAAyBQ,MAAM,CAACH,IAAP,CAAYU,QAAZ,CAAqBd,CAA9C,EAAiDO,MAAM,CAACH,IAAP,CAAYU,QAAZ,CAAqBb,CAAtE,CAAvB,EAFmC,CAGnC;;AACA,WAAKhB,KAAL,CAAW+B,MAAX,CAAkBC,MAAlB;AACH,KALD;AAMH;;AAxDS;;AA2Dd,eAAetC,OAAf","sourcesContent":["import Vector3 from \"./math/Vector3\";\r\nimport RigidBody from \"./RigidBody\";\r\nimport SphereCollider from \"./SphereCollider\";\r\n\r\nclass Bullets {\r\n    constructor (bulletModel, bulletSpeed, bulletReach) {\r\n        this.activeBullets = [];\r\n        this.model = bulletModel;\r\n        let collider = new SphereCollider();\r\n        collider.transform.setScale([2.0, 2.0, 2.0]);\r\n        this.model.setCollider();\r\n        this.speed = bulletSpeed;\r\n        this.reach = bulletReach;\r\n\r\n        this.gravityIsEnabled = false;\r\n        this.gravity = 9.82;\r\n    }\r\n\r\n    addBullet(origin, direction) {\r\n        let rb = new RigidBody(origin);\r\n        rb.setVelocity([direction.x * this.speed, direction.y * this.speed, direction.z * this.speed]);\r\n        rb.enableGravity(this.gravityIsEnabled);\r\n\r\n        this.activeBullets.push({\r\n            body: rb,\r\n            origin: new Vector3(origin),\r\n        });\r\n    }\r\n\r\n    enableGravity(state) {\r\n        this.gravityIsEnabled = state;\r\n\r\n        this.activeBullets.forEach((bullet) => {\r\n            bullet.body.enableGravity(state);\r\n        });\r\n    }\r\n\r\n    update(timeStep) {\r\n        let i = 0;\r\n        while(i < this.activeBullets.length) {\r\n            this.model.setRigidBody(this.activeBullets[i].body);\r\n            this.model.update(timeStep);\r\n\r\n            // Check distance from start position\r\n            if (Vector3.distance(this.activeBullets[i].body.position, this.activeBullets[i].origin) < this.reach) {\r\n                ++i;\r\n            }\r\n            else {// Remove bullet if distance is greater than reach\r\n                this.activeBullets.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    render(shader) {\r\n        this.activeBullets.forEach((bullet) => {\r\n            // Set bullet position\r\n            this.model.setPosition([bullet.body.position.x, bullet.body.position.y, bullet.body.position.z]);\r\n            // Draw bullet\r\n            this.model.render(shader);\r\n        })\r\n    }\r\n}\r\n\r\nexport default Bullets;"]},"metadata":{},"sourceType":"module"}