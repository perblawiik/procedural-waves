{"ast":null,"code":"var _jsxFileName = \"G:\\\\DOKUMENT\\\\Projekt\\\\React\\\\BlueBox\\\\client\\\\src\\\\js\\\\bluebox\\\\Engine.js\";\nimport React, { Component } from 'react';\nimport Shader from './Shader.js';\nimport Time from './Time.js';\n\nclass Engine extends Component {\n  constructor(props) {\n    super(props); // Initialize timing variables\n\n    this.fpsTimer = 0;\n    this.frameCount = 0;\n    this.fps = 0;\n    this.animationId = null;\n  }\n\n  componentDidMount() {\n    this.preload();\n    this.startMainLoop();\n  }\n\n  componentWillUnmount() {\n    this.stopMainLoop();\n  }\n\n  displayFrameRate() {\n    this.tNow = Time.time; // If tNow - tLast >= 1000, one second has passed\n\n    if (this.tNow - this.fpsTimer >= 1000) {\n      // Fps = the number of frames\n      this.fps = this.frameCount; // Update timer\n\n      this.fpsTimer = this.tNow; // Reset frame count\n\n      this.frameCount = 0; // Clear previous\n\n      this.ctx.clearRect(0, 0, this.props.width, 25); // Draw fps and frame time in milliseconds\n\n      this.ctx.fillText(\"Frame rate: \" + this.fps + \" fps\", 0, 15);\n    } else {\n      ++this.frameCount;\n    }\n  }\n\n  preload() {\n    // 2D Canvas for text display\n    this.canvas2D = document.getElementById('text-canvas');\n    this.ctx = this.canvas2D.getContext('2d');\n    this.ctx.font = \"20px Consolas\";\n    this.ctx.fillStyle = 'white'; // WebGL canvas\n\n    this.canvas = document.getElementById(\"gl-canvas\"); // Initialize the WebGL context\n\n    this.gl = this.canvas.getContext(\"webgl\"); // If WebGL isn't supported\n\n    if (!this.gl) {\n      console.log(\"WebGL is not supported\");\n      alert(\"Unable to initialize WebGL. Your browser or machine may not support it.\");\n      return 0;\n    }\n\n    this.gl.viewport(0, 0, this.canvas.width, this.canvas.height); // Set clear color to light blue, fully opaque\n\n    this.gl.clearColor(0.0, 0.40, 0.55, 1.0); // Enable depth so that triangles closer to the camera don't get overlapped by those further away\n\n    this.gl.enable(this.gl.DEPTH_TEST); // Only draw \"visible\" sides (memory saving)\n\n    this.gl.enable(this.gl.CULL_FACE);\n    this.gl.cullFace(this.gl.BACK);\n    this.gl.frontFace(this.gl.CCW);\n    this.mainShader = new Shader(this.canvas); //this.SetUpEventListeners();\n  }\n\n  startMainLoop() {\n    // Initiate the main loop\n    this.animationId = window.requestAnimationFrame(this.mainLoop.bind(this));\n  }\n\n  stopMainLoop() {\n    window.cancelAnimationFrame(this.animationId);\n    this.animationId = null;\n  }\n\n  mainLoop() {\n    this.animationId = window.requestAnimationFrame(this.mainLoop.bind(this)); // Keeps track of time passed and delta time\n\n    Time.Update(); // Clear screen 3D\n\n    this.gl.clear(this.gl.DEPTH_BUFFER_BIT | this.gl.COLOR_BUFFER_BIT); // Clear screen 2D\n\n    this.ctx.clearRect(0, 25, this.props.width, this.props.height); // Draw objects\n    // Clear depth so that local coordinate axes is visible through models\n    // Draw local coordinate axes UI\n    // Calculate fps\n\n    this.displayFrameRate();\n  }\n\n  render() {\n    const engine_container_style = {\n      display: 'flex',\n      flexDirection: 'column',\n      width: this.props.width\n    };\n    return React.createElement(\"div\", {\n      className: \"Engine-container\",\n      style: engine_container_style,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"HEJSAN\")), React.createElement(\"div\", {\n      style: {\n        backgroundColor: 'grey',\n        width: this.props.width,\n        display: 'flex',\n        flexDirection: 'row'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.CreateGameObject.bind(this, defaultCubeSettings),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        margin: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Create Game Object CUBE\")), React.createElement(\"button\", {\n      onClick: this.CreateGameObject.bind(this, defaultSphereSettings),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        margin: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Create Game Object SPHERE\")), React.createElement(\"button\", {\n      onClick: this.CreateGameObject.bind(this, defaultCylinderSettings),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      style: {\n        margin: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Create Game Object CYLINDER\"))), React.createElement(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'row'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        width: this.props.width,\n        height: this.props.height\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"canvas\", {\n      id: \"gl-canvas\",\n      width: this.props.width,\n      height: this.props.height,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"Your browser does not support HTML5\"), React.createElement(\"canvas\", {\n      id: \"text-canvas\",\n      width: this.props.width,\n      height: this.props.height,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    })), this.DisplayPanel()));\n  }\n\n}\n\nexport default Engine;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\Engine.js"],"names":["React","Component","Shader","Time","Engine","constructor","props","fpsTimer","frameCount","fps","animationId","componentDidMount","preload","startMainLoop","componentWillUnmount","stopMainLoop","displayFrameRate","tNow","time","ctx","clearRect","width","fillText","canvas2D","document","getElementById","getContext","font","fillStyle","canvas","gl","console","log","alert","viewport","height","clearColor","enable","DEPTH_TEST","CULL_FACE","cullFace","BACK","frontFace","CCW","mainShader","window","requestAnimationFrame","mainLoop","bind","cancelAnimationFrame","Update","clear","DEPTH_BUFFER_BIT","COLOR_BUFFER_BIT","render","engine_container_style","display","flexDirection","backgroundColor","CreateGameObject","defaultCubeSettings","margin","defaultSphereSettings","defaultCylinderSettings","DisplayPanel"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport Shader from './Shader.js';\r\nimport Time from './Time.js';\r\n\r\nclass Engine extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // Initialize timing variables\r\n        this.fpsTimer = 0;\r\n        this.frameCount = 0;\r\n        this.fps = 0;\r\n        this.animationId = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.preload();\r\n        this.startMainLoop();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.stopMainLoop();\r\n    }\r\n\r\n    displayFrameRate() {\r\n\r\n        this.tNow = Time.time;\r\n\r\n        // If tNow - tLast >= 1000, one second has passed\r\n        if ( (this.tNow - this.fpsTimer) >= 1000) {\r\n            // Fps = the number of frames\r\n            this.fps = this.frameCount;\r\n            // Update timer\r\n            this.fpsTimer = this.tNow;\r\n            // Reset frame count\r\n            this.frameCount = 0;\r\n            // Clear previous\r\n            this.ctx.clearRect(0, 0, this.props.width, 25);\r\n            // Draw fps and frame time in milliseconds\r\n            this.ctx.fillText(\"Frame rate: \" + this.fps + \" fps\", 0, 15);\r\n        }\r\n        else {\r\n            ++this.frameCount;\r\n        }\r\n    }\r\n\r\n    preload() {\r\n        // 2D Canvas for text display\r\n        this.canvas2D = document.getElementById('text-canvas');\r\n        this.ctx = this.canvas2D.getContext('2d');\r\n        this.ctx.font = \"20px Consolas\";\r\n        this.ctx.fillStyle = 'white';\r\n\r\n        // WebGL canvas\r\n        this.canvas = document.getElementById(\"gl-canvas\");\r\n        // Initialize the WebGL context\r\n        this.gl = this.canvas.getContext(\"webgl\");\r\n\r\n        // If WebGL isn't supported\r\n        if (!this.gl) {\r\n            console.log(\"WebGL is not supported\");\r\n            alert(\"Unable to initialize WebGL. Your browser or machine may not support it.\");\r\n            return 0;\r\n        }\r\n\r\n        this.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n        // Set clear color to light blue, fully opaque\r\n        this.gl.clearColor(0.0, 0.40, 0.55, 1.0);\r\n        // Enable depth so that triangles closer to the camera don't get overlapped by those further away\r\n        this.gl.enable(this.gl.DEPTH_TEST);\r\n        // Only draw \"visible\" sides (memory saving)\r\n        this.gl.enable(this.gl.CULL_FACE);\r\n        this.gl.cullFace(this.gl.BACK);\r\n        this.gl.frontFace(this.gl.CCW);\r\n\r\n        this.mainShader = new Shader(this.canvas);\r\n\r\n        //this.SetUpEventListeners();\r\n    }\r\n\r\n    startMainLoop() {\r\n        // Initiate the main loop\r\n        this.animationId = window.requestAnimationFrame( this.mainLoop.bind(this) );\r\n    }\r\n\r\n    stopMainLoop() {\r\n        window.cancelAnimationFrame( this.animationId );\r\n        this.animationId = null;\r\n    }\r\n\r\n    mainLoop() {\r\n        this.animationId = window.requestAnimationFrame( this.mainLoop.bind(this) );\r\n\r\n        // Keeps track of time passed and delta time\r\n        Time.Update();\r\n\r\n        // Clear screen 3D\r\n        this.gl.clear(this.gl.DEPTH_BUFFER_BIT | this.gl.COLOR_BUFFER_BIT);\r\n        // Clear screen 2D\r\n        this.ctx.clearRect(0, 25, this.props.width, this.props.height);\r\n\r\n        // Draw objects\r\n\r\n        // Clear depth so that local coordinate axes is visible through models\r\n\r\n        // Draw local coordinate axes UI\r\n\r\n        // Calculate fps\r\n        this.displayFrameRate();\r\n    }\r\n\r\n    render() {\r\n        const engine_container_style = {\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            width: this.props.width\r\n        };\r\n\r\n        return (\r\n            <div className=\"Engine-container\" style={engine_container_style}>\r\n                <div>\r\n                    <p>\r\n                        HEJSAN\r\n                    </p>\r\n                </div>\r\n\r\n                <div style={{backgroundColor: 'grey', width: this.props.width, display: 'flex', flexDirection: 'row'}}>\r\n                    <button onClick={this.CreateGameObject.bind(this, defaultCubeSettings)}>\r\n                        <p style={{margin: 0}}>\r\n                            Create Game Object CUBE\r\n                        </p>\r\n                    </button>\r\n                    <button onClick={this.CreateGameObject.bind(this, defaultSphereSettings)}>\r\n                        <p style={{margin: 0}}>\r\n                            Create Game Object SPHERE\r\n                        </p>\r\n                    </button>\r\n                    <button onClick={this.CreateGameObject.bind(this, defaultCylinderSettings)}>\r\n                        <p style={{margin: 0}}>\r\n                            Create Game Object CYLINDER\r\n                        </p>\r\n                    </button>\r\n                </div>\r\n\r\n                <div style={{display: 'flex', flexDirection: 'row'}}>\r\n                    <div style={{width: this.props.width, height: this.props.height}}>\r\n                        <canvas id='gl-canvas' width={this.props.width} height={this.props.height}>\r\n                            Your browser does not support HTML5\r\n                        </canvas>\r\n                        <canvas id=\"text-canvas\" width={this.props.width} height={this.props.height}>\r\n                        </canvas>\r\n                    </div>\r\n                    {this.DisplayPanel()}\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Engine;"]},"metadata":{},"sourceType":"module"}