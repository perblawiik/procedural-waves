{"ast":null,"code":"import Matrix4 from './math/Matrix4';\nimport Vector3 from './math/Vector3';\n\nclass Transform {\n  constructor() {\n    this.position = new Vector3([0.0, 0.0, 0.0]);\n    this.rotation = new Vector3([0.0, 0.0, 0.0]);\n    this.scaling = new Vector3([1.0, 1.0, 1.0]);\n    this.matrix = Matrix4.Identity();\n    this.parent = null;\n  }\n\n  Clone() {\n    let clone = new Transform();\n    clone.SetPosition([this.position.x, this.position.y, this.position.z]);\n    clone.SetScale([this.scaling.x, this.scaling.y, this.scaling.z]);\n    clone.SetRotation([this.rotation.x, this.rotation.y, this.rotation.z]);\n    clone.SetParent(this.parent);\n    return clone;\n  }\n\n  SetScale(scale) {\n    this.scaling.Set(scale);\n    this.ComposeMatrix();\n  }\n\n  SetPosition(position) {\n    this.position.Set(position);\n    this.ComposeMatrix();\n  }\n\n  SetRotation(rotation) {\n    this.rotation.Set(rotation);\n    this.ComposeMatrix();\n  }\n\n  Translate(val) {\n    let rightVec = new Vector3([this.matrix[0] * val[0], this.matrix[4] * val[0], this.matrix[8] * val[0]]);\n    let upVec = new Vector3([this.matrix[1] * val[1], this.matrix[5] * val[1], this.matrix[9] * val[1]]);\n    let forwardVec = new Vector3([this.matrix[2] * val[2], this.matrix[6] * val[2], this.matrix[10] * val[2]]);\n    this.SetPosition([this.position.x - rightVec.x / this.scaling.x + upVec.x / this.scaling.x + forwardVec.x / this.scaling.x, this.position.y + rightVec.y / this.scaling.y - upVec.y / this.scaling.y + forwardVec.y / this.scaling.y, this.position.z + rightVec.z / this.scaling.z + upVec.z / this.scaling.z - forwardVec.z / this.scaling.z]);\n  }\n\n  SetParent(parentTransform) {\n    this.parent = parentTransform;\n    this.ComposeMatrix();\n  }\n\n  Inverted() {\n    return Matrix4.Invert(this.matrix, this.matrix);\n  }\n\n  ComposeMatrix() {\n    let scaleMatrix = Matrix4.Scaling(this.scaling.x, this.scaling.y, this.scaling.z);\n    let rotationMatrix = Matrix4.RotateZ(Matrix4.Identity(), this.rotation.z * Math.PI / 180);\n    rotationMatrix = Matrix4.RotateX(rotationMatrix, this.rotation.x * Math.PI / 180);\n    rotationMatrix = Matrix4.RotateY(rotationMatrix, this.rotation.y * Math.PI / 180);\n    let translationMatrix = Matrix4.Translation(this.position.x, this.position.y, this.position.z);\n    this.matrix = Matrix4.Multiply(rotationMatrix, scaleMatrix);\n    this.matrix = Matrix4.Multiply(translationMatrix, this.matrix);\n\n    if (this.parent) {\n      this.matrix = Matrix4.Multiply(this.parent.matrix, this.matrix);\n    }\n  }\n\n}\n\nexport default Transform;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\Transform.js"],"names":["Matrix4","Vector3","Transform","constructor","position","rotation","scaling","matrix","Identity","parent","Clone","clone","SetPosition","x","y","z","SetScale","SetRotation","SetParent","scale","Set","ComposeMatrix","Translate","val","rightVec","upVec","forwardVec","parentTransform","Inverted","Invert","scaleMatrix","Scaling","rotationMatrix","RotateZ","Math","PI","RotateX","RotateY","translationMatrix","Translation","Multiply"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,gBAApB;AACA,OAAOC,OAAP,MAAoB,gBAApB;;AAEA,MAAMC,SAAN,CAAgB;AACZC,EAAAA,WAAW,GAAG;AACV,SAAKC,QAAL,GAAgB,IAAIH,OAAJ,CAAY,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAZ,CAAhB;AACA,SAAKI,QAAL,GAAgB,IAAIJ,OAAJ,CAAY,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAZ,CAAhB;AACA,SAAKK,OAAL,GAAe,IAAIL,OAAJ,CAAY,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAZ,CAAf;AAEA,SAAKM,MAAL,GAAcP,OAAO,CAACQ,QAAR,EAAd;AACA,SAAKC,MAAL,GAAc,IAAd;AACH;;AAEDC,EAAAA,KAAK,GAAG;AACJ,QAAIC,KAAK,GAAG,IAAIT,SAAJ,EAAZ;AACAS,IAAAA,KAAK,CAACC,WAAN,CAAkB,CAAC,KAAKR,QAAL,CAAcS,CAAf,EAAkB,KAAKT,QAAL,CAAcU,CAAhC,EAAmC,KAAKV,QAAL,CAAcW,CAAjD,CAAlB;AACAJ,IAAAA,KAAK,CAACK,QAAN,CAAe,CAAC,KAAKV,OAAL,CAAaO,CAAd,EAAiB,KAAKP,OAAL,CAAaQ,CAA9B,EAAiC,KAAKR,OAAL,CAAaS,CAA9C,CAAf;AACAJ,IAAAA,KAAK,CAACM,WAAN,CAAkB,CAAC,KAAKZ,QAAL,CAAcQ,CAAf,EAAkB,KAAKR,QAAL,CAAcS,CAAhC,EAAmC,KAAKT,QAAL,CAAcU,CAAjD,CAAlB;AACAJ,IAAAA,KAAK,CAACO,SAAN,CAAgB,KAAKT,MAArB;AACA,WAAOE,KAAP;AACH;;AAEDK,EAAAA,QAAQ,CAACG,KAAD,EAAQ;AACZ,SAAKb,OAAL,CAAac,GAAb,CAAiBD,KAAjB;AACA,SAAKE,aAAL;AACH;;AAEDT,EAAAA,WAAW,CAACR,QAAD,EAAW;AAClB,SAAKA,QAAL,CAAcgB,GAAd,CAAkBhB,QAAlB;AACA,SAAKiB,aAAL;AACH;;AAEDJ,EAAAA,WAAW,CAAEZ,QAAF,EAAY;AACnB,SAAKA,QAAL,CAAce,GAAd,CAAkBf,QAAlB;AACA,SAAKgB,aAAL;AACH;;AAEDC,EAAAA,SAAS,CAACC,GAAD,EAAM;AACX,QAAIC,QAAQ,GAAG,IAAIvB,OAAJ,CAAY,CAAC,KAAKM,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAAnB,EAAwB,KAAKhB,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAA1C,EAA+C,KAAKhB,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAAjE,CAAZ,CAAf;AACA,QAAIE,KAAK,GAAG,IAAIxB,OAAJ,CAAY,CAAC,KAAKM,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAAnB,EAAwB,KAAKhB,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAA1C,EAA+C,KAAKhB,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAAjE,CAAZ,CAAZ;AACA,QAAIG,UAAU,GAAG,IAAIzB,OAAJ,CAAY,CAAC,KAAKM,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAAnB,EAAwB,KAAKhB,MAAL,CAAY,CAAZ,IAAegB,GAAG,CAAC,CAAD,CAA1C,EAA+C,KAAKhB,MAAL,CAAY,EAAZ,IAAgBgB,GAAG,CAAC,CAAD,CAAlE,CAAZ,CAAjB;AAEA,SAAKX,WAAL,CAAiB,CACb,KAAKR,QAAL,CAAcS,CAAd,GAAkBW,QAAQ,CAACX,CAAT,GAAW,KAAKP,OAAL,CAAaO,CAA1C,GAA8CY,KAAK,CAACZ,CAAN,GAAQ,KAAKP,OAAL,CAAaO,CAAnE,GAAuEa,UAAU,CAACb,CAAX,GAAa,KAAKP,OAAL,CAAaO,CADpF,EAEb,KAAKT,QAAL,CAAcU,CAAd,GAAkBU,QAAQ,CAACV,CAAT,GAAW,KAAKR,OAAL,CAAaQ,CAA1C,GAA8CW,KAAK,CAACX,CAAN,GAAQ,KAAKR,OAAL,CAAaQ,CAAnE,GAAuEY,UAAU,CAACZ,CAAX,GAAa,KAAKR,OAAL,CAAaQ,CAFpF,EAGb,KAAKV,QAAL,CAAcW,CAAd,GAAkBS,QAAQ,CAACT,CAAT,GAAW,KAAKT,OAAL,CAAaS,CAA1C,GAA8CU,KAAK,CAACV,CAAN,GAAQ,KAAKT,OAAL,CAAaS,CAAnE,GAAuEW,UAAU,CAACX,CAAX,GAAa,KAAKT,OAAL,CAAaS,CAHpF,CAAjB;AAKH;;AAEDG,EAAAA,SAAS,CAACS,eAAD,EAAkB;AACvB,SAAKlB,MAAL,GAAckB,eAAd;AACA,SAAKN,aAAL;AACH;;AAEDO,EAAAA,QAAQ,GAAI;AACR,WAAO5B,OAAO,CAAC6B,MAAR,CAAe,KAAKtB,MAApB,EAA4B,KAAKA,MAAjC,CAAP;AACH;;AAEDc,EAAAA,aAAa,GAAI;AACb,QAAIS,WAAW,GAAG9B,OAAO,CAAC+B,OAAR,CAAgB,KAAKzB,OAAL,CAAaO,CAA7B,EAAgC,KAAKP,OAAL,CAAaQ,CAA7C,EAAgD,KAAKR,OAAL,CAAaS,CAA7D,CAAlB;AACA,QAAIiB,cAAc,GAAGhC,OAAO,CAACiC,OAAR,CAAgBjC,OAAO,CAACQ,QAAR,EAAhB,EAAqC,KAAKH,QAAL,CAAcU,CAAd,GAAgBmB,IAAI,CAACC,EAArB,GAAwB,GAA7D,CAArB;AACAH,IAAAA,cAAc,GAAGhC,OAAO,CAACoC,OAAR,CAAgBJ,cAAhB,EAAiC,KAAK3B,QAAL,CAAcQ,CAAd,GAAgBqB,IAAI,CAACC,EAArB,GAAwB,GAAzD,CAAjB;AACAH,IAAAA,cAAc,GAAGhC,OAAO,CAACqC,OAAR,CAAgBL,cAAhB,EAAiC,KAAK3B,QAAL,CAAcS,CAAd,GAAgBoB,IAAI,CAACC,EAArB,GAAwB,GAAzD,CAAjB;AACA,QAAIG,iBAAiB,GAAGtC,OAAO,CAACuC,WAAR,CAAoB,KAAKnC,QAAL,CAAcS,CAAlC,EAAqC,KAAKT,QAAL,CAAcU,CAAnD,EAAsD,KAAKV,QAAL,CAAcW,CAApE,CAAxB;AAEA,SAAKR,MAAL,GAAcP,OAAO,CAACwC,QAAR,CAAiBR,cAAjB,EAAiCF,WAAjC,CAAd;AACA,SAAKvB,MAAL,GAAcP,OAAO,CAACwC,QAAR,CAAiBF,iBAAjB,EAAoC,KAAK/B,MAAzC,CAAd;;AAEA,QAAI,KAAKE,MAAT,EAAiB;AACb,WAAKF,MAAL,GAAcP,OAAO,CAACwC,QAAR,CAAiB,KAAK/B,MAAL,CAAYF,MAA7B,EAAqC,KAAKA,MAA1C,CAAd;AACH;AACJ;;AApEW;;AAuEhB,eAAeL,SAAf","sourcesContent":["import Matrix4 from './math/Matrix4';\r\nimport Vector3 from './math/Vector3';\r\n\r\nclass Transform {\r\n    constructor() {\r\n        this.position = new Vector3([0.0, 0.0, 0.0]);\r\n        this.rotation = new Vector3([0.0, 0.0, 0.0]);\r\n        this.scaling = new Vector3([1.0, 1.0, 1.0]);\r\n\r\n        this.matrix = Matrix4.Identity();\r\n        this.parent = null;\r\n    }\r\n\r\n    Clone() {\r\n        let clone = new Transform();\r\n        clone.SetPosition([this.position.x, this.position.y, this.position.z]);\r\n        clone.SetScale([this.scaling.x, this.scaling.y, this.scaling.z]);\r\n        clone.SetRotation([this.rotation.x, this.rotation.y, this.rotation.z]);\r\n        clone.SetParent(this.parent);\r\n        return clone;\r\n    }\r\n\r\n    SetScale(scale) {\r\n        this.scaling.Set(scale);\r\n        this.ComposeMatrix();\r\n    }\r\n\r\n    SetPosition(position) {\r\n        this.position.Set(position);\r\n        this.ComposeMatrix();\r\n    }\r\n\r\n    SetRotation (rotation) {\r\n        this.rotation.Set(rotation);\r\n        this.ComposeMatrix();\r\n    }\r\n\r\n    Translate(val) {\r\n        let rightVec = new Vector3([this.matrix[0]*val[0], this.matrix[4]*val[0], this.matrix[8]*val[0]]);\r\n        let upVec = new Vector3([this.matrix[1]*val[1], this.matrix[5]*val[1], this.matrix[9]*val[1]]);\r\n        let forwardVec = new Vector3([this.matrix[2]*val[2], this.matrix[6]*val[2], this.matrix[10]*val[2]]);\r\n\r\n        this.SetPosition([\r\n            this.position.x - rightVec.x/this.scaling.x + upVec.x/this.scaling.x + forwardVec.x/this.scaling.x,\r\n            this.position.y + rightVec.y/this.scaling.y - upVec.y/this.scaling.y + forwardVec.y/this.scaling.y,\r\n            this.position.z + rightVec.z/this.scaling.z + upVec.z/this.scaling.z - forwardVec.z/this.scaling.z,\r\n        ]);\r\n    }\r\n\r\n    SetParent(parentTransform) {\r\n        this.parent = parentTransform;\r\n        this.ComposeMatrix();\r\n    }\r\n\r\n    Inverted () {\r\n        return Matrix4.Invert(this.matrix, this.matrix);\r\n    }\r\n\r\n    ComposeMatrix () {\r\n        let scaleMatrix = Matrix4.Scaling(this.scaling.x, this.scaling.y, this.scaling.z);\r\n        let rotationMatrix = Matrix4.RotateZ(Matrix4.Identity(), (this.rotation.z*Math.PI/180));\r\n        rotationMatrix = Matrix4.RotateX(rotationMatrix, (this.rotation.x*Math.PI/180));\r\n        rotationMatrix = Matrix4.RotateY(rotationMatrix, (this.rotation.y*Math.PI/180));\r\n        let translationMatrix = Matrix4.Translation(this.position.x, this.position.y, this.position.z);\r\n\r\n        this.matrix = Matrix4.Multiply(rotationMatrix, scaleMatrix);\r\n        this.matrix = Matrix4.Multiply(translationMatrix, this.matrix);\r\n\r\n        if (this.parent) {\r\n            this.matrix = Matrix4.Multiply(this.parent.matrix, this.matrix);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Transform;"]},"metadata":{},"sourceType":"module"}