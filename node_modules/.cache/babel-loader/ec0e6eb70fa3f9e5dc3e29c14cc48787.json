{"ast":null,"code":"// JavaScript\nimport Transform from './Transform';\nimport Vector3 from './math/Vector3';\n\nclass Camera {\n  constructor(shader) {\n    this.shaderList = [];\n    this.shaderList.push(shader);\n    this.addShader(shader);\n    /*\r\n    shader.activate();\r\n    this.cameraViewUniformLocation = shader.getUniformLoc(\"cameraView\");\r\n    this.cameraPositionUniformLocation = shader.getUniformLoc(\"viewPosition\");\r\n    */\n\n    this.transform = new Transform();\n    this.updateUniforms();\n  }\n\n  addShader(shader) {\n    this.shaderListInfo.push({\n      shaderProgram: shader,\n      cameraView: shader.getUniformLoc(\"cameraView\"),\n      cameraPos: shader.getUniformLoc(\"viewPosition\")\n    });\n  }\n\n  translate(val) {\n    let rightVec = new Vector3([this.transform.matrix[0] * val[0], this.transform.matrix[4] * val[0], this.transform.matrix[8] * val[0]]);\n    let upVec = new Vector3([this.transform.matrix[1] * val[1], this.transform.matrix[5] * val[1], this.transform.matrix[9] * val[1]]);\n    let forwardVec = new Vector3([this.transform.matrix[2] * val[2], this.transform.matrix[6] * val[2], this.transform.matrix[10] * val[2]]);\n    this.setPosition([this.transform.position.x + rightVec.x + upVec.x + forwardVec.x, this.transform.position.y + rightVec.y + upVec.y + forwardVec.y, this.transform.position.z + rightVec.z + upVec.z + forwardVec.z]);\n  }\n\n  rotate(rot) {\n    this.setRotation([this.transform.rotation.x + rot[0], this.transform.rotation.y + rot[1], this.transform.rotation.z + rot[2]]);\n  }\n\n  setPosition(cameraPosition) {\n    this.transform.setPosition(cameraPosition);\n    this.updateUniforms(); //this.updateCameraViewUniform();\n    //this.updateCameraPositionUniform();\n  }\n\n  setRotation(cameraRotation) {\n    this.transform.setRotation(cameraRotation);\n    this.updateUniforms(); //this.updateCameraViewUniform();\n  }\n\n  rotateX(angle) {\n    this.setRotation([angle, this.transform.rotation.y, this.transform.rotation.z]);\n  }\n\n  rotateY(angle) {\n    this.setRotation([this.transform.rotation.x, angle, this.transform.rotation.z]);\n  }\n  /*\r\n  updateCameraViewUniform () {\r\n      this.shader.activate();\r\n      this.shader.setUniformMat4f(this.cameraViewUniformLocation, this.transform.inverted());\r\n  }\r\n    updateCameraPositionUniform() {\r\n      this.shader.activate();\r\n      this.shader.setUniformVec3f(this.cameraPositionUniformLocation, this.transform.position);\r\n  }\r\n     */\n\n\n  updateUniforms() {\n    for (let i = 0; i < this.shaderListInfo.length; ++i) {\n      let info = this.shaderListInfo[i];\n      info.shaderProgram.activate();\n      info.shaderProgram.setUniformMat4f(info.cameraView, this.transform.inverted());\n      info.shaderProgram.setUniformVec3f(info.cameraPos, this.transform.position);\n    }\n  }\n\n}\n\nexport default Camera;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\Camera.js"],"names":["Transform","Vector3","Camera","constructor","shader","shaderList","push","addShader","transform","updateUniforms","shaderListInfo","shaderProgram","cameraView","getUniformLoc","cameraPos","translate","val","rightVec","matrix","upVec","forwardVec","setPosition","position","x","y","z","rotate","rot","setRotation","rotation","cameraPosition","cameraRotation","rotateX","angle","rotateY","i","length","info","activate","setUniformMat4f","inverted","setUniformVec3f"],"mappings":"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","sourcesContent":["// JavaScript\r\nimport Transform from './Transform';\r\nimport Vector3 from './math/Vector3';\r\n\r\nclass Camera {\r\n    constructor(shader) {\r\n        this.shaderList = [];\r\n        this.shaderList.push(shader);\r\n        this.addShader(shader);\r\n        /*\r\n        shader.activate();\r\n        this.cameraViewUniformLocation = shader.getUniformLoc(\"cameraView\");\r\n        this.cameraPositionUniformLocation = shader.getUniformLoc(\"viewPosition\");\r\n        */\r\n\r\n        this.transform = new Transform();\r\n        this.updateUniforms();\r\n    }\r\n\r\n    addShader(shader) {\r\n        this.shaderListInfo.push({\r\n            shaderProgram: shader,\r\n            cameraView: shader.getUniformLoc(\"cameraView\"),\r\n            cameraPos: shader.getUniformLoc(\"viewPosition\")\r\n        });\r\n    }\r\n\r\n    translate (val) {\r\n        let rightVec = new Vector3([this.transform.matrix[0]*val[0], this.transform.matrix[4]*val[0], this.transform.matrix[8]*val[0]]);\r\n        let upVec = new Vector3([this.transform.matrix[1]*val[1], this.transform.matrix[5]*val[1], this.transform.matrix[9]*val[1]]);\r\n        let forwardVec = new Vector3([this.transform.matrix[2]*val[2], this.transform.matrix[6]*val[2], this.transform.matrix[10]*val[2]]);\r\n\r\n        this.setPosition([\r\n            this.transform.position.x + rightVec.x + upVec.x + forwardVec.x,\r\n            this.transform.position.y + rightVec.y + upVec.y + forwardVec.y,\r\n            this.transform.position.z + rightVec.z + upVec.z + forwardVec.z,\r\n        ]);\r\n    }\r\n\r\n    rotate (rot) {\r\n        this.setRotation([\r\n            this.transform.rotation.x + rot[0],\r\n            this.transform.rotation.y + rot[1],\r\n            this.transform.rotation.z + rot[2]\r\n        ]);\r\n    }\r\n\r\n    setPosition(cameraPosition) {\r\n        this.transform.setPosition(cameraPosition);\r\n        this.updateUniforms();\r\n        //this.updateCameraViewUniform();\r\n        //this.updateCameraPositionUniform();\r\n    }\r\n\r\n    setRotation(cameraRotation) {\r\n        this.transform.setRotation(cameraRotation);\r\n        this.updateUniforms();\r\n        //this.updateCameraViewUniform();\r\n    }\r\n\r\n    rotateX (angle) {\r\n        this.setRotation([angle, this.transform.rotation.y, this.transform.rotation.z]);\r\n    }\r\n\r\n    rotateY (angle) {\r\n        this.setRotation([this.transform.rotation.x, angle, this.transform.rotation.z]);\r\n    }\r\n\r\n    /*\r\n    updateCameraViewUniform () {\r\n        this.shader.activate();\r\n        this.shader.setUniformMat4f(this.cameraViewUniformLocation, this.transform.inverted());\r\n    }\r\n\r\n    updateCameraPositionUniform() {\r\n        this.shader.activate();\r\n        this.shader.setUniformVec3f(this.cameraPositionUniformLocation, this.transform.position);\r\n    }\r\n       */\r\n\r\n    updateUniforms() {\r\n        for (let i = 0; i < this.shaderListInfo.length; ++i) {\r\n            let info = this.shaderListInfo[i];\r\n            info.shaderProgram.activate();\r\n            info.shaderProgram.setUniformMat4f(info.cameraView, this.transform.inverted());\r\n            info.shaderProgram.setUniformVec3f(info.cameraPos, this.transform.position);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Camera;"]},"metadata":{},"sourceType":"module"}