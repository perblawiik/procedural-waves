{"ast":null,"code":"import Time from \"./Time\";\nimport Vector3 from \"./math/Vector3\";\n\nclass Scene {\n  constructor(shaders) {\n    this.sceneObjects = [];\n    this.lightSources = [];\n    this.shaders = shaders;\n  }\n\n  addGameObject(gameObject) {\n    this.sceneObjects.push(gameObject);\n  }\n\n  addLightSource(lightSource) {\n    let shader = this.shaders.get(\"main\");\n    shader.activate();\n    this.lightSources.push(lightSource);\n\n    for (let i = 0; i < this.lightSources.length; ++i) {\n      let lightSource = this.lightSources[i];\n      let positionLocName = \"pointLights[\" + i + \"].position\";\n      shader.setUniformVec3f(shader.getUniformLoc(positionLocName), lightSource.position);\n      let colorLocName = \"pointLights[\" + i + \"].color\";\n      shader.setUniformVec3f(shader.getUniformLoc(colorLocName), lightSource.lightColor);\n      let strengthLocName = \"pointLights[\" + i + \"].strength\";\n      let strengthVector = new Vector3([lightSource.lightStrength, 0.0, 0.0]);\n      console.log(strengthVector);\n      shader.setUniformVec3f(shader.getUniformLoc(strengthLocName), strengthVector);\n    }\n\n    let lightSourceCountUniformLoc = shader.getUniformLoc(\"lightCount\");\n    shader.setUniformInt(lightSourceCountUniformLoc, this.lightSources.length);\n  }\n\n  draw() {\n    this.sceneObjects.forEach(object => {\n      object.render(this.shaders.get(\"main\"));\n    });\n    this.lightSources.forEach(lightSource => {\n      //let currentPos = lightSource.transform.position;\n      //currentPos.x = this.lightSourceOffsetX + (100.0 * Math.sin(Time.time * 0.001));\n      //lightSource.setPosition([currentPos.x, currentPos.y, currentPos.z]);\n      lightSource.render(this.shaders.get(\"ambient\"));\n    });\n  }\n\n}\n\nexport default Scene;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\Scene.js"],"names":["Time","Vector3","Scene","constructor","shaders","sceneObjects","lightSources","addGameObject","gameObject","push","addLightSource","lightSource","shader","get","activate","i","length","positionLocName","setUniformVec3f","getUniformLoc","position","colorLocName","lightColor","strengthLocName","strengthVector","lightStrength","console","log","lightSourceCountUniformLoc","setUniformInt","draw","forEach","object","render"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,QAAjB;AACA,OAAOC,OAAP,MAAoB,gBAApB;;AAEA,MAAMC,KAAN,CAAY;AACRC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKF,OAAL,GAAeA,OAAf;AACH;;AAEDG,EAAAA,aAAa,CAACC,UAAD,EAAa;AACtB,SAAKH,YAAL,CAAkBI,IAAlB,CAAuBD,UAAvB;AACH;;AAEDE,EAAAA,cAAc,CAACC,WAAD,EAAc;AACxB,QAAIC,MAAM,GAAG,KAAKR,OAAL,CAAaS,GAAb,CAAiB,MAAjB,CAAb;AACAD,IAAAA,MAAM,CAACE,QAAP;AAEA,SAAKR,YAAL,CAAkBG,IAAlB,CAAuBE,WAAvB;;AACA,SAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKT,YAAL,CAAkBU,MAAtC,EAA8C,EAAED,CAAhD,EAAmD;AAC/C,UAAIJ,WAAW,GAAG,KAAKL,YAAL,CAAkBS,CAAlB,CAAlB;AAEA,UAAIE,eAAe,GAAG,iBAAiBF,CAAjB,GAAqB,YAA3C;AACAH,MAAAA,MAAM,CAACM,eAAP,CAAuBN,MAAM,CAACO,aAAP,CAAqBF,eAArB,CAAvB,EAA8DN,WAAW,CAACS,QAA1E;AAEA,UAAIC,YAAY,GAAG,iBAAiBN,CAAjB,GAAqB,SAAxC;AACAH,MAAAA,MAAM,CAACM,eAAP,CAAuBN,MAAM,CAACO,aAAP,CAAqBE,YAArB,CAAvB,EAA2DV,WAAW,CAACW,UAAvE;AAEA,UAAIC,eAAe,GAAG,iBAAiBR,CAAjB,GAAqB,YAA3C;AACA,UAAIS,cAAc,GAAG,IAAIvB,OAAJ,CAAY,CAACU,WAAW,CAACc,aAAb,EAA4B,GAA5B,EAAiC,GAAjC,CAAZ,CAArB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,cAAZ;AACAZ,MAAAA,MAAM,CAACM,eAAP,CAAuBN,MAAM,CAACO,aAAP,CAAqBI,eAArB,CAAvB,EAA8DC,cAA9D;AACH;;AAED,QAAII,0BAA0B,GAAGhB,MAAM,CAACO,aAAP,CAAqB,YAArB,CAAjC;AACAP,IAAAA,MAAM,CAACiB,aAAP,CAAqBD,0BAArB,EAAiD,KAAKtB,YAAL,CAAkBU,MAAnE;AACH;;AAEDc,EAAAA,IAAI,GAAG;AACH,SAAKzB,YAAL,CAAkB0B,OAAlB,CAA2BC,MAAD,IAAW;AACjCA,MAAAA,MAAM,CAACC,MAAP,CAAc,KAAK7B,OAAL,CAAaS,GAAb,CAAiB,MAAjB,CAAd;AACH,KAFD;AAIA,SAAKP,YAAL,CAAkByB,OAAlB,CAA2BpB,WAAD,IAAiB;AACvC;AACA;AACA;AACAA,MAAAA,WAAW,CAACsB,MAAZ,CAAmB,KAAK7B,OAAL,CAAaS,GAAb,CAAiB,SAAjB,CAAnB;AACH,KALD;AAMH;;AA9CO;;AAiDZ,eAAeX,KAAf","sourcesContent":["import Time from \"./Time\";\r\nimport Vector3 from \"./math/Vector3\";\r\n\r\nclass Scene {\r\n    constructor(shaders) {\r\n        this.sceneObjects = [];\r\n        this.lightSources = [];\r\n        this.shaders = shaders;\r\n    }\r\n\r\n    addGameObject(gameObject) {\r\n        this.sceneObjects.push(gameObject);\r\n    }\r\n\r\n    addLightSource(lightSource) {\r\n        let shader = this.shaders.get(\"main\");\r\n        shader.activate();\r\n\r\n        this.lightSources.push(lightSource);\r\n        for (let i = 0; i < this.lightSources.length; ++i) {\r\n            let lightSource = this.lightSources[i];\r\n\r\n            let positionLocName = \"pointLights[\" + i + \"].position\";\r\n            shader.setUniformVec3f(shader.getUniformLoc(positionLocName), lightSource.position);\r\n\r\n            let colorLocName = \"pointLights[\" + i + \"].color\";\r\n            shader.setUniformVec3f(shader.getUniformLoc(colorLocName), lightSource.lightColor);\r\n\r\n            let strengthLocName = \"pointLights[\" + i + \"].strength\";\r\n            let strengthVector = new Vector3([lightSource.lightStrength, 0.0, 0.0]);\r\n            console.log(strengthVector);\r\n            shader.setUniformVec3f(shader.getUniformLoc(strengthLocName), strengthVector);\r\n        }\r\n\r\n        let lightSourceCountUniformLoc = shader.getUniformLoc(\"lightCount\");\r\n        shader.setUniformInt(lightSourceCountUniformLoc, this.lightSources.length);\r\n    }\r\n\r\n    draw() {\r\n        this.sceneObjects.forEach((object)=> {\r\n            object.render(this.shaders.get(\"main\"));\r\n        });\r\n\r\n        this.lightSources.forEach((lightSource) => {\r\n            //let currentPos = lightSource.transform.position;\r\n            //currentPos.x = this.lightSourceOffsetX + (100.0 * Math.sin(Time.time * 0.001));\r\n            //lightSource.setPosition([currentPos.x, currentPos.y, currentPos.z]);\r\n            lightSource.render(this.shaders.get(\"ambient\"));\r\n        });\r\n    }\r\n}\r\n\r\nexport default Scene;"]},"metadata":{},"sourceType":"module"}