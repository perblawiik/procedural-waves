{"ast":null,"code":"// Enum struct for handling mouse events\nconst MouseKey = {\n  LEFT: 1,\n  MIDDLE: 2,\n  RIGHT: 3\n};\n\nclass EventHandler {\n  constructor(sceneObjects) {\n    this.mouseEvent = {\n      movementX: 0,\n      movementY: 0,\n      deltaX: 0,\n      deltaY: 0,\n      isPressed: {\n        leftButton: false,\n        rightButton: false,\n        middleButton: false\n      },\n      wheelDelta: 0\n    };\n    let me = this.mouseEvent;\n    this.mouseInputReader = {\n      leftClickIsActive: false,\n      rightClickIsActive: false,\n      moveX: 0,\n      moveY: 0,\n      altKey: false,\n      ctrlKey: false,\n      shiftKey: false,\n      selectedGameObjectIndex: 0,\n      selectedGameObjectAxis: null,\n      moveGameObjectX: 0,\n      moveGameObjectY: 0,\n      wheelDelta: 0\n    };\n    let mouseInput = this.mouseInputReader;\n    let canvas2D = document.getElementById('text-canvas'); // Mouse down event function definition\n\n    canvas2D.onmousedown = function (event) {\n      if (event.which === MouseKey.LEFT) {\n        me.isPressed.leftButton = true;\n      }\n\n      if (event.which === MouseKey.RIGHT) {\n        me.isPressed.rightButton = true;\n      }\n\n      if (event.which === MouseKey.MIDDLE) {\n        me.isPressed.middleButton = true;\n      }\n\n      switch (event.which) {\n        case MouseKey.LEFT:\n          mouseInput.leftClickIsActive = true;\n          mouseInput.altKey = event.altKey;\n          mouseInput.ctrlKey = event.ctrlKey;\n          mouseInput.shiftKey = event.shiftKey; // Extend the click box borders\n\n          let offset = 4;\n\n          for (let i = 0; i < sceneObjects.length; ++i) {\n            // Check if the coordinate system is visible\n            if (sceneObjects[i].localCoordinateSystemUI.isVisible) {\n              // Check if mouse is in the click box area\n              if (event.offsetX <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.xMax + offset && event.offsetX >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.xMin - offset && event.offsetY <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.yMax + offset && event.offsetY >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.yMin - offset) {\n                mouseInput.selectedGameObjectAxis = 'x';\n              } else if (event.offsetX <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.xMax + offset && event.offsetX >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.xMin - offset && event.offsetY <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.yMax + offset && event.offsetY >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.yMin - offset) {\n                mouseInput.selectedGameObjectAxis = 'y';\n              } else if (event.offsetX <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.xMax + offset && event.offsetX >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisZ.borders.xMin - offset && event.offsetY <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisZ.borders.yMax + offset && event.offsetY >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisZ.borders.yMin - offset) {\n                mouseInput.selectedGameObjectAxis = 'z';\n              }\n\n              mouseInput.selectedGameObjectIndex = i;\n            }\n          }\n\n          break;\n\n        case MouseKey.RIGHT:\n          mouseInput.rightClickIsActive = true;\n          break;\n\n        default:\n          break;\n      }\n    }; // Mouse up event function definition\n\n\n    canvas2D.onmouseup = function (event) {\n      if (event.which === MouseKey.LEFT) {\n        me.isPressed.leftButton = false;\n      }\n\n      if (event.which === MouseKey.RIGHT) {\n        me.isPressed.rightButton = false;\n      }\n\n      if (event.which === MouseKey.MIDDLE) {\n        me.isPressed.middleButton = false;\n      }\n\n      switch (event.which) {\n        case MouseKey.LEFT:\n          mouseInput.leftClickIsActive = false;\n          mouseInput.selectedGameObjectAxis = null;\n          break;\n\n        case MouseKey.RIGHT:\n          mouseInput.rightClickIsActive = false;\n          break;\n\n        default:\n          break;\n      }\n    }; // Mouse leave event function definition\n\n\n    canvas2D.onmouseleave = function (event) {\n      if (me.isPressed.leftButton) {\n        me.isPressed.leftButton = false;\n      }\n\n      if (me.isPressed.rightButton) {\n        me.isPressed.rightButton = false;\n      }\n\n      if (me.isPressed.middleButton) {\n        me.isPressed.middleButton = false;\n      }\n      /*\r\n      if (mouseInput.leftClickIsActive) {\r\n          mouseInput.leftClickIsActive = false;\r\n      }\r\n      else if (mouseInput.rightClickIsActive) {\r\n          mouseInput.rightClickIsActive = false;\r\n      }\r\n      */\n\n    }; // Mouse move event function definition\n\n\n    canvas2D.onmousemove = function (event) {\n      me.movementX = event.movementX;\n      me.movementY = event.movementY;\n\n      if (mouseInput.leftClickIsActive || mouseInput.rightClickIsActive) {\n        mouseInput.moveX = event.movementX;\n        mouseInput.moveY = event.movementY;\n        mouseInput.moveGameObjectX = event.movementX;\n        mouseInput.moveGameObjectY = event.movementY;\n      }\n    }; // Mouse wheel event function definition\n\n\n    canvas2D.onwheel = function (event) {\n      me.wheelDelta = event.deltaY;\n      mouseInput.wheelDelta = event.deltaY;\n    };\n  }\n\n  processCameraMovement(camera) {\n    // Zoom camera view in and out\n    if (this.mouseEvent.isPressed.wheelButton) {\n      camera.translate([0.0, 0.0, -(this.mouseEvent.movementY + this.mouseEvent.movementX) / 4]);\n      this.mouseEvent.movementX = 0;\n      this.mouseEvent.movementY = 0;\n    } // Pan the camera view\n    else if (this.mouseEvent.isPressed.leftButton) {\n        camera.translate([-this.mouseEvent.movementX / 4, this.mouseEvent.movementY / 4, 0.0]);\n        this.mouseEvent.movementX = 0;\n        this.mouseEvent.movementY = 0;\n      } // Rotate the camera view\n      else if (this.mouseEvent.isPressed.rightButton) {\n          camera.rotate([-this.mouseEvent.movementY / 8, -this.mouseEvent.movementX / 8, 0.0]);\n          this.mouseEvent.movementX = 0;\n          this.mouseEvent.movementY = 0;\n        }\n\n    if (Math.abs(this.mouseEvent.wheelDelta) > 0.01) {\n      if (this.mouseEvent.wheelDelta > 0.0) {\n        camera.translate([0.0, 0.0, 4.0]);\n      } else camera.translate([0.0, 0.0, -4.0]);\n\n      this.mouseEvent.wheelDelta = 0;\n    }\n    /*\r\n    if (this.mouseInputReader.leftClickIsActive) {\r\n        // Move forward/backwards\r\n        if (this.mouseInputReader.ctrlKey) {\r\n            camera.translate([0.0, 0.0, -(this.mouseInputReader.moveY+this.mouseInputReader.moveX)/4]);\r\n        }\r\n        else { // Move left/right and up/down\r\n            camera.translate([-this.mouseInputReader.moveX/4, this.mouseInputReader.moveY/4, 0.0]);\r\n        }\r\n          this.mouseInputReader.moveX = 0;\r\n        this.mouseInputReader.moveY = 0;\r\n          //this.UpdateGameObjectScreenPosition();\r\n    }\r\n    else if (this.mouseInputReader.rightClickIsActive) {\r\n        camera.rotate([-this.mouseInputReader.moveY/8, -this.mouseInputReader.moveX/8, 0.0]);\r\n        this.mouseInputReader.moveX = 0;\r\n        this.mouseInputReader.moveY = 0;\r\n    }\r\n      if (Math.abs(this.mouseInputReader.wheelDelta) > 0.01) {\r\n        if (this.mouseInputReader.wheelDelta > 0.0) {\r\n            camera.translate([0.0, 0.0, 4.0]);\r\n        }\r\n        else\r\n            camera.translate([0.0, 0.0, -4.0]);\r\n          this.mouseInputReader.wheelDelta = 0;\r\n    }\r\n    */\n\n  }\n\n}\n\nexport default EventHandler;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\EventHandler.js"],"names":["MouseKey","LEFT","MIDDLE","RIGHT","EventHandler","constructor","sceneObjects","mouseEvent","movementX","movementY","deltaX","deltaY","isPressed","leftButton","rightButton","middleButton","wheelDelta","me","mouseInputReader","leftClickIsActive","rightClickIsActive","moveX","moveY","altKey","ctrlKey","shiftKey","selectedGameObjectIndex","selectedGameObjectAxis","moveGameObjectX","moveGameObjectY","mouseInput","canvas2D","document","getElementById","onmousedown","event","which","offset","i","length","localCoordinateSystemUI","isVisible","offsetX","clickBoxAxisX","borders","xMax","xMin","offsetY","yMax","yMin","clickBoxAxisY","clickBoxAxisZ","onmouseup","onmouseleave","onmousemove","onwheel","processCameraMovement","camera","wheelButton","translate","rotate","Math","abs"],"mappings":"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","sourcesContent":["// Enum struct for handling mouse events\r\nconst MouseKey = {\r\n    LEFT: 1,\r\n    MIDDLE: 2,\r\n    RIGHT: 3\r\n};\r\n\r\nclass EventHandler {\r\n    constructor(sceneObjects) {\r\n\r\n        this.mouseEvent = {\r\n            movementX: 0,\r\n            movementY: 0,\r\n            deltaX: 0,\r\n            deltaY: 0,\r\n            isPressed: {\r\n                leftButton: false,\r\n                rightButton: false,\r\n                middleButton: false\r\n            },\r\n            wheelDelta: 0\r\n        };\r\n\r\n        let me = this.mouseEvent;\r\n\r\n        this.mouseInputReader = {\r\n            leftClickIsActive: false,\r\n            rightClickIsActive: false,\r\n            moveX: 0,\r\n            moveY: 0,\r\n            altKey: false,\r\n            ctrlKey: false,\r\n            shiftKey: false,\r\n            selectedGameObjectIndex: 0,\r\n            selectedGameObjectAxis: null,\r\n            moveGameObjectX: 0,\r\n            moveGameObjectY: 0,\r\n            wheelDelta: 0\r\n        };\r\n        let mouseInput = this.mouseInputReader;\r\n\r\n        let canvas2D = document.getElementById('text-canvas');\r\n\r\n        // Mouse down event function definition\r\n        canvas2D.onmousedown = function(event) {\r\n\r\n            if(event.which === MouseKey.LEFT) {\r\n                me.isPressed.leftButton = true;\r\n            }\r\n            if (event.which === MouseKey.RIGHT) {\r\n                me.isPressed.rightButton = true;\r\n            }\r\n            if (event.which === MouseKey.MIDDLE) {\r\n                me.isPressed.middleButton = true;\r\n            }\r\n\r\n            switch(event.which) {\r\n                case MouseKey.LEFT:\r\n                    mouseInput.leftClickIsActive = true;\r\n                    mouseInput.altKey = event.altKey;\r\n                    mouseInput.ctrlKey = event.ctrlKey;\r\n                    mouseInput.shiftKey = event.shiftKey;\r\n\r\n                    // Extend the click box borders\r\n                    let offset = 4;\r\n\r\n                    for (let i = 0; i < sceneObjects.length; ++i) {\r\n                        // Check if the coordinate system is visible\r\n                        if (sceneObjects[i].localCoordinateSystemUI.isVisible) {\r\n                            // Check if mouse is in the click box area\r\n                            if (event.offsetX <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.xMax+offset &&\r\n                                event.offsetX >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.xMin-offset &&\r\n                                event.offsetY <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.yMax+offset &&\r\n                                event.offsetY >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisX.borders.yMin-offset) {\r\n\r\n                                mouseInput.selectedGameObjectAxis = 'x';\r\n                            }\r\n                            else if (event.offsetX <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.xMax+offset &&\r\n                                event.offsetX >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.xMin-offset &&\r\n                                event.offsetY <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.yMax+offset &&\r\n                                event.offsetY >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.yMin-offset) {\r\n\r\n                                mouseInput.selectedGameObjectAxis = 'y';\r\n                            }\r\n                            else if (event.offsetX <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisY.borders.xMax+offset &&\r\n                                event.offsetX >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisZ.borders.xMin-offset &&\r\n                                event.offsetY <= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisZ.borders.yMax+offset &&\r\n                                event.offsetY >= sceneObjects[i].localCoordinateSystemUI.clickBoxAxisZ.borders.yMin-offset) {\r\n\r\n                                mouseInput.selectedGameObjectAxis = 'z';\r\n                            }\r\n\r\n                            mouseInput.selectedGameObjectIndex = i;\r\n                        }\r\n                    }\r\n                    break;\r\n                case MouseKey.RIGHT:\r\n                    mouseInput.rightClickIsActive = true;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        };\r\n\r\n        // Mouse up event function definition\r\n        canvas2D.onmouseup = function(event) {\r\n            if(event.which === MouseKey.LEFT) {\r\n                me.isPressed.leftButton = false;\r\n            }\r\n            if (event.which === MouseKey.RIGHT) {\r\n                me.isPressed.rightButton = false;\r\n            }\r\n            if (event.which === MouseKey.MIDDLE) {\r\n                me.isPressed.middleButton = false;\r\n            }\r\n\r\n            switch(event.which) {\r\n                case MouseKey.LEFT:\r\n                    mouseInput.leftClickIsActive = false;\r\n                    mouseInput.selectedGameObjectAxis = null;\r\n                    break;\r\n                case MouseKey.RIGHT:\r\n                    mouseInput.rightClickIsActive = false;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        };\r\n\r\n        // Mouse leave event function definition\r\n        canvas2D.onmouseleave = function(event) {\r\n            if(me.isPressed.leftButton) {\r\n                me.isPressed.leftButton = false;\r\n            }\r\n            if (me.isPressed.rightButton) {\r\n                me.isPressed.rightButton = false;\r\n            }\r\n            if (me.isPressed.middleButton) {\r\n                me.isPressed.middleButton = false;\r\n            }\r\n\r\n            /*\r\n            if (mouseInput.leftClickIsActive) {\r\n                mouseInput.leftClickIsActive = false;\r\n            }\r\n            else if (mouseInput.rightClickIsActive) {\r\n                mouseInput.rightClickIsActive = false;\r\n            }\r\n            */\r\n        };\r\n\r\n        // Mouse move event function definition\r\n        canvas2D.onmousemove  = function(event) {\r\n\r\n            me.movementX = event.movementX;\r\n            me.movementY = event.movementY;\r\n\r\n            if (mouseInput.leftClickIsActive || mouseInput.rightClickIsActive) {\r\n                mouseInput.moveX = event.movementX;\r\n                mouseInput.moveY = event.movementY;\r\n                mouseInput.moveGameObjectX = event.movementX;\r\n                mouseInput.moveGameObjectY = event.movementY;\r\n            }\r\n        };\r\n\r\n        // Mouse wheel event function definition\r\n        canvas2D.onwheel = function(event) {\r\n            me.wheelDelta = event.deltaY;\r\n\r\n            mouseInput.wheelDelta = event.deltaY;\r\n        };\r\n    }\r\n\r\n    processCameraMovement (camera) {\r\n        // Zoom camera view in and out\r\n        if (this.mouseEvent.isPressed.wheelButton) {\r\n            camera.translate([0.0, 0.0, -(this.mouseEvent.movementY+this.mouseEvent.movementX)/4]);\r\n            this.mouseEvent.movementX = 0;\r\n            this.mouseEvent.movementY = 0;\r\n        } // Pan the camera view\r\n        else if(this.mouseEvent.isPressed.leftButton) {\r\n            camera.translate([-this.mouseEvent.movementX/4, this.mouseEvent.movementY/4, 0.0]);\r\n            this.mouseEvent.movementX = 0;\r\n            this.mouseEvent.movementY = 0;\r\n        } // Rotate the camera view\r\n        else if (this.mouseEvent.isPressed.rightButton) {\r\n            camera.rotate([-this.mouseEvent.movementY/8, -this.mouseEvent.movementX/8, 0.0]);\r\n            this.mouseEvent.movementX = 0;\r\n            this.mouseEvent.movementY = 0;\r\n        }\r\n\r\n        if (Math.abs(this.mouseEvent.wheelDelta) > 0.01) {\r\n            if (this.mouseEvent.wheelDelta > 0.0) {\r\n                camera.translate([0.0, 0.0, 4.0]);\r\n            }\r\n            else\r\n                camera.translate([0.0, 0.0, -4.0]);\r\n\r\n            this.mouseEvent.wheelDelta = 0;\r\n        }\r\n\r\n        /*\r\n        if (this.mouseInputReader.leftClickIsActive) {\r\n            // Move forward/backwards\r\n            if (this.mouseInputReader.ctrlKey) {\r\n                camera.translate([0.0, 0.0, -(this.mouseInputReader.moveY+this.mouseInputReader.moveX)/4]);\r\n            }\r\n            else { // Move left/right and up/down\r\n                camera.translate([-this.mouseInputReader.moveX/4, this.mouseInputReader.moveY/4, 0.0]);\r\n            }\r\n\r\n            this.mouseInputReader.moveX = 0;\r\n            this.mouseInputReader.moveY = 0;\r\n\r\n            //this.UpdateGameObjectScreenPosition();\r\n        }\r\n        else if (this.mouseInputReader.rightClickIsActive) {\r\n            camera.rotate([-this.mouseInputReader.moveY/8, -this.mouseInputReader.moveX/8, 0.0]);\r\n            this.mouseInputReader.moveX = 0;\r\n            this.mouseInputReader.moveY = 0;\r\n        }\r\n\r\n        if (Math.abs(this.mouseInputReader.wheelDelta) > 0.01) {\r\n            if (this.mouseInputReader.wheelDelta > 0.0) {\r\n                camera.translate([0.0, 0.0, 4.0]);\r\n            }\r\n            else\r\n                camera.translate([0.0, 0.0, -4.0]);\r\n\r\n            this.mouseInputReader.wheelDelta = 0;\r\n        }\r\n        */\r\n    }\r\n\r\n}\r\n\r\nexport default EventHandler;"]},"metadata":{},"sourceType":"module"}