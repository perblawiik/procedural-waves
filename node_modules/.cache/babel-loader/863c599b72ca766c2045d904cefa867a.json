{"ast":null,"code":"// JavaScript\nimport Transform from './Transform';\nimport Vector3 from './math/Vector3';\n\nclass Camera {\n  constructor(shaders) {\n    this.transform = new Transform();\n    this.shaders = shaders;\n    let mainShader = this.shaders.get(\"phong\");\n    mainShader.activate();\n    this.cameraViewUniformLoc = this.shaders.get(\"phong\").getUniformLoc(\"cameraView\");\n    this.cameraPosUniformLoc = this.shaders.get(\"phong\").getUniformLoc(\"viewPosition\");\n    this.updateUniforms();\n  }\n\n  get position() {\n    return this.transform.position;\n  }\n\n  get rotation() {\n    return this.transform.rotation;\n  }\n\n  get scale() {\n    return this.transform.scaling;\n  }\n\n  translate(val) {\n    let rightVec = new Vector3([this.transform.matrix[0] * val[0], this.transform.matrix[4] * val[0], this.transform.matrix[8] * val[0]]);\n    let upVec = new Vector3([this.transform.matrix[1] * val[1], this.transform.matrix[5] * val[1], this.transform.matrix[9] * val[1]]);\n    let forwardVec = new Vector3([this.transform.matrix[2] * val[2], this.transform.matrix[6] * val[2], this.transform.matrix[10] * val[2]]);\n    this.setPosition([this.transform.position.x + rightVec.x + upVec.x + forwardVec.x, this.transform.position.y + rightVec.y + upVec.y + forwardVec.y, this.transform.position.z + rightVec.z + upVec.z + forwardVec.z]);\n  }\n\n  rotate(rot) {\n    this.setRotation([this.transform.rotation.x + rot[0], this.transform.rotation.y + rot[1], this.transform.rotation.z + rot[2]]);\n  }\n\n  setPosition(cameraPosition) {\n    this.transform.setPosition(cameraPosition);\n    this.transform.invert();\n    this.updateUniforms();\n  }\n\n  setRotation(cameraRotation) {\n    this.transform.setRotation(cameraRotation);\n    this.transform.invert();\n    this.updateUniforms();\n  }\n\n  rotateX(angle) {\n    this.setRotation([angle, this.transform.rotation.y, this.transform.rotation.z]);\n  }\n\n  rotateY(angle) {\n    this.setRotation([this.transform.rotation.x, angle, this.transform.rotation.z]);\n  }\n\n  updateUniforms() {\n    this.shaders.forEach(shader => {\n      shader.activate();\n      shader.setUniformVec3f(this.cameraPosUniformLoc, this.position);\n      shader.setUniformMat4f(this.cameraViewUniformLoc, this.transform.matrix);\n    });\n  }\n\n}\n\nexport default Camera;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\Camera.js"],"names":["Transform","Vector3","Camera","constructor","shaders","transform","mainShader","get","activate","cameraViewUniformLoc","getUniformLoc","cameraPosUniformLoc","updateUniforms","position","rotation","scale","scaling","translate","val","rightVec","matrix","upVec","forwardVec","setPosition","x","y","z","rotate","rot","setRotation","cameraPosition","invert","cameraRotation","rotateX","angle","rotateY","forEach","shader","setUniformVec3f","setUniformMat4f"],"mappings":"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","sourcesContent":["// JavaScript\r\nimport Transform from './Transform';\r\nimport Vector3 from './math/Vector3';\r\n\r\nclass Camera {\r\n    constructor(shaders) {\r\n        this.transform = new Transform();\r\n        this.shaders = shaders;\r\n\r\n        let mainShader = this.shaders.get(\"phong\");\r\n        mainShader.activate();\r\n        this.cameraViewUniformLoc = this.shaders.get(\"phong\").getUniformLoc(\"cameraView\");\r\n        this.cameraPosUniformLoc = this.shaders.get(\"phong\").getUniformLoc(\"viewPosition\");\r\n        this.updateUniforms();\r\n    }\r\n\r\n    get position() {\r\n        return this.transform.position;\r\n    }\r\n\r\n    get rotation() {\r\n        return this.transform.rotation;\r\n    }\r\n\r\n    get scale() {\r\n        return this.transform.scaling;\r\n    }\r\n\r\n    translate (val) {\r\n        let rightVec = new Vector3([this.transform.matrix[0]*val[0], this.transform.matrix[4]*val[0], this.transform.matrix[8]*val[0]]);\r\n        let upVec = new Vector3([this.transform.matrix[1]*val[1], this.transform.matrix[5]*val[1], this.transform.matrix[9]*val[1]]);\r\n        let forwardVec = new Vector3([this.transform.matrix[2]*val[2], this.transform.matrix[6]*val[2], this.transform.matrix[10]*val[2]]);\r\n\r\n        this.setPosition([\r\n            this.transform.position.x + rightVec.x + upVec.x + forwardVec.x,\r\n            this.transform.position.y + rightVec.y + upVec.y + forwardVec.y,\r\n            this.transform.position.z + rightVec.z + upVec.z + forwardVec.z,\r\n        ]);\r\n    }\r\n\r\n    rotate (rot) {\r\n        this.setRotation([\r\n            this.transform.rotation.x + rot[0],\r\n            this.transform.rotation.y + rot[1],\r\n            this.transform.rotation.z + rot[2]\r\n        ]);\r\n    }\r\n\r\n    setPosition(cameraPosition) {\r\n        this.transform.setPosition(cameraPosition);\r\n        this.transform.invert();\r\n        this.updateUniforms();\r\n    }\r\n\r\n    setRotation(cameraRotation) {\r\n        this.transform.setRotation(cameraRotation);\r\n        this.transform.invert();\r\n        this.updateUniforms();\r\n    }\r\n\r\n    rotateX (angle) {\r\n        this.setRotation([angle, this.transform.rotation.y, this.transform.rotation.z]);\r\n    }\r\n\r\n    rotateY (angle) {\r\n        this.setRotation([this.transform.rotation.x, angle, this.transform.rotation.z]);\r\n    }\r\n\r\n    updateUniforms() {\r\n        this.shaders.forEach((shader) => {\r\n            shader.activate();\r\n            shader.setUniformVec3f(this.cameraPosUniformLoc, this.position);\r\n            shader.setUniformMat4f(this.cameraViewUniformLoc, this.transform.matrix);\r\n        });\r\n    }\r\n}\r\n\r\nexport default Camera;"]},"metadata":{},"sourceType":"module"}