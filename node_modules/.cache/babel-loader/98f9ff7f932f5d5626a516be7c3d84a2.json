{"ast":null,"code":"import Time from \"./Time\";\n\nclass Scene {\n  constructor(shaders) {\n    this.sceneObjects = [];\n    this.lightSources = [];\n    this.shaders = shaders;\n  }\n\n  addGameObject(gameObject) {\n    this.sceneObjects.push(gameObject);\n  }\n\n  addLightSource(lightSource) {\n    let lightCount = this.lightSources.length;\n    let arrayName = \"pointLights[\" + lightCount + \"].\";\n    let shader = this.shaders.get(\"main\");\n    shader.activate();\n    let positionUniformLoc = shader.getUniformLoc(arrayName + \"position\");\n    let colorUniformLoc = shader.getUniformLoc(arrayName + \"color\");\n    let strengthLocName = \"pointLights[\" + lightCount + \"].strength\";\n    let lightSourceCountUniformLoc = shader.getUniformLoc(\"lightCount\");\n    shader.setUniformVec3f(positionUniformLoc, lightSource.position);\n    shader.setUniformVec3f(colorUniformLoc, lightSource.lightColor);\n    shader.setUniformFloat(shader.getUniformLoc(strengthLocName), lightSource.lightStrength);\n    shader.setUniformInt(lightSourceCountUniformLoc, lightCount);\n    this.lightSources.push(lightSource);\n  }\n\n  draw() {\n    this.sceneObjects.forEach(object => {\n      object.render(this.shaders.get(\"main\"));\n    });\n    this.lightSources.forEach(lightSource => {\n      //let currentPos = lightSource.transform.position;\n      //currentPos.x = this.lightSourceOffsetX + (100.0 * Math.sin(Time.time * 0.001));\n      //lightSource.setPosition([currentPos.x, currentPos.y, currentPos.z]);\n      lightSource.render(this.shaders.get(\"ambient\"));\n    });\n  }\n\n}\n\nexport default Scene;","map":{"version":3,"sources":["G:\\DOKUMENT\\Projekt\\React\\BlueBox\\client\\src\\js\\bluebox\\Scene.js"],"names":["Time","Scene","constructor","shaders","sceneObjects","lightSources","addGameObject","gameObject","push","addLightSource","lightSource","lightCount","length","arrayName","shader","get","activate","positionUniformLoc","getUniformLoc","colorUniformLoc","strengthLocName","lightSourceCountUniformLoc","setUniformVec3f","position","lightColor","setUniformFloat","lightStrength","setUniformInt","draw","forEach","object","render"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,QAAjB;;AAEA,MAAMC,KAAN,CAAY;AACRC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACjB,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKF,OAAL,GAAeA,OAAf;AACH;;AAEDG,EAAAA,aAAa,CAACC,UAAD,EAAa;AACtB,SAAKH,YAAL,CAAkBI,IAAlB,CAAuBD,UAAvB;AACH;;AAEDE,EAAAA,cAAc,CAACC,WAAD,EAAc;AACxB,QAAIC,UAAU,GAAG,KAAKN,YAAL,CAAkBO,MAAnC;AACA,QAAIC,SAAS,GAAG,iBAAiBF,UAAjB,GAA8B,IAA9C;AAEA,QAAIG,MAAM,GAAG,KAAKX,OAAL,CAAaY,GAAb,CAAiB,MAAjB,CAAb;AACAD,IAAAA,MAAM,CAACE,QAAP;AACA,QAAIC,kBAAkB,GAAGH,MAAM,CAACI,aAAP,CAAqBL,SAAS,GAAG,UAAjC,CAAzB;AACA,QAAIM,eAAe,GAAGL,MAAM,CAACI,aAAP,CAAqBL,SAAS,GAAG,OAAjC,CAAtB;AACA,QAAIO,eAAe,GAAG,iBAAiBT,UAAjB,GAA8B,YAApD;AACA,QAAIU,0BAA0B,GAAGP,MAAM,CAACI,aAAP,CAAqB,YAArB,CAAjC;AAGAJ,IAAAA,MAAM,CAACQ,eAAP,CAAuBL,kBAAvB,EAA2CP,WAAW,CAACa,QAAvD;AACAT,IAAAA,MAAM,CAACQ,eAAP,CAAuBH,eAAvB,EAAwCT,WAAW,CAACc,UAApD;AACAV,IAAAA,MAAM,CAACW,eAAP,CAAuBX,MAAM,CAACI,aAAP,CAAqBE,eAArB,CAAvB,EAA8DV,WAAW,CAACgB,aAA1E;AACAZ,IAAAA,MAAM,CAACa,aAAP,CAAqBN,0BAArB,EAAiDV,UAAjD;AAEA,SAAKN,YAAL,CAAkBG,IAAlB,CAAuBE,WAAvB;AACH;;AAEDkB,EAAAA,IAAI,GAAG;AACH,SAAKxB,YAAL,CAAkByB,OAAlB,CAA2BC,MAAD,IAAW;AACjCA,MAAAA,MAAM,CAACC,MAAP,CAAc,KAAK5B,OAAL,CAAaY,GAAb,CAAiB,MAAjB,CAAd;AACH,KAFD;AAIA,SAAKV,YAAL,CAAkBwB,OAAlB,CAA2BnB,WAAD,IAAiB;AACvC;AACA;AACA;AACAA,MAAAA,WAAW,CAACqB,MAAZ,CAAmB,KAAK5B,OAAL,CAAaY,GAAb,CAAiB,SAAjB,CAAnB;AACH,KALD;AAMH;;AA1CO;;AA6CZ,eAAed,KAAf","sourcesContent":["import Time from \"./Time\";\r\n\r\nclass Scene {\r\n    constructor(shaders) {\r\n        this.sceneObjects = [];\r\n        this.lightSources = [];\r\n        this.shaders = shaders;\r\n    }\r\n\r\n    addGameObject(gameObject) {\r\n        this.sceneObjects.push(gameObject);\r\n    }\r\n\r\n    addLightSource(lightSource) {\r\n        let lightCount = this.lightSources.length;\r\n        let arrayName = \"pointLights[\" + lightCount + \"].\";\r\n\r\n        let shader = this.shaders.get(\"main\");\r\n        shader.activate();\r\n        let positionUniformLoc = shader.getUniformLoc(arrayName + \"position\");\r\n        let colorUniformLoc = shader.getUniformLoc(arrayName + \"color\");\r\n        let strengthLocName = \"pointLights[\" + lightCount + \"].strength\";\r\n        let lightSourceCountUniformLoc = shader.getUniformLoc(\"lightCount\");\r\n\r\n        \r\n        shader.setUniformVec3f(positionUniformLoc, lightSource.position);\r\n        shader.setUniformVec3f(colorUniformLoc, lightSource.lightColor);\r\n        shader.setUniformFloat(shader.getUniformLoc(strengthLocName), lightSource.lightStrength);\r\n        shader.setUniformInt(lightSourceCountUniformLoc, lightCount);\r\n\r\n        this.lightSources.push(lightSource);\r\n    }\r\n\r\n    draw() {\r\n        this.sceneObjects.forEach((object)=> {\r\n            object.render(this.shaders.get(\"main\"));\r\n        });\r\n\r\n        this.lightSources.forEach((lightSource) => {\r\n            //let currentPos = lightSource.transform.position;\r\n            //currentPos.x = this.lightSourceOffsetX + (100.0 * Math.sin(Time.time * 0.001));\r\n            //lightSource.setPosition([currentPos.x, currentPos.y, currentPos.z]);\r\n            lightSource.render(this.shaders.get(\"ambient\"));\r\n        });\r\n    }\r\n}\r\n\r\nexport default Scene;"]},"metadata":{},"sourceType":"module"}